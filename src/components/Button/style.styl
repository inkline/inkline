@import '../../resources/css/config'
@import '../../resources/css/mixins'
@import '_variables'

.button
    display: inline-block
    font-weight: --button-font-weight
    text-align: center
    white-space: nowrap
    vertical-align: middle
    user-select: none
    border: --button-border-width solid transparent
    line-height: --button-line-height
    box-shadow: --button-box-shadow
    if --transition['button']
        transition: background-color --transition-duration --transition-easing, background-position --transition-duration --transition-easing, background-size --transition-duration --transition-easing, border-color --transition-duration --transition-easing, color --transition-duration --transition-easing, box-shadow --transition-duration --transition-easing

    &:hover
    &:focus
    &.-hovered
    &.-focused
        box-shadow: --button-box-shadow-focus
        text-decoration: none
        outline: 0

    // Disabled state
    // Disabled state comes first so active can properly restyle
    &.-disabled
    &:disabled
        opacity: --button-disabled-opacity
        box-shadow: none

    // Active state
    &:not(:disabled):not(.-disabled):active
    &:not(:disabled):not(.-disabled).-active
        background-size: 200% 200%
        background-position: 100% 100%
        box-shadow: --button-box-shadow-active, --button-box-shadow-active-inset
        &:focus
            box-shadow: --button-box-shadow-active, --button-box-shadow-focus, --button-box-shadow-active-inset

    // Add "hand" cursor to non-disabled .button elements
    &:not(:disabled):not(.-disabled)
        cursor: pointer

    // Block buttons
    // Make buttons span the whole parent width
    &.-block
        display: block
        width: 100%

        + .button.-block
            margin-top: --button-block-margin

    // Link buttons
    // Make a button look and behave like a link
    &.-link
        color: --link-color
        background-color: transparent
        background-image: none
        border-color: transparent
        box-shadow: none

        &:hover
        &.-hovered
        &:focus
        &.-focused
            color: --link-color-hover
            text-decoration: --link-decoration-hover
            background-color: transparent
            background-image: none
            border-color: transparent
            box-shadow: none

        &:disabled,
        &.-disabled
            color: --button-link-disabled-color
            pointer-events: none

    for size in (sm md lg)
        &.-{size}
            border-radius: --button-border-radius[size]
            font-size: --button-font-size[size]
            padding: --button-padding[size]

    for --theme-name, --theme in --themes['button']
        &.-{--theme-name}
            color: -text-color-by-luminance(--theme['color'], --theme-color-light, --theme-color-dark)
            background-color: --theme['color']
            border-color: --theme['color']
            background-repeat: repeat
            background-position: 0 0
            background-size: 100% 100%
            if --gradient-enabled and --theme['gradient']
                background-image: -linear-gradient(--theme['gradient'])

            &:hover
            &:focus
            &.-hovered
            &.-focused
                background-size: 150% 150%
                background-position: 100% 100%
                background-color: darken(--theme['color'], --button-darken-percentage-hover)
                border-color: darken(--theme['color'], --button-darken-percentage-hover)

            &.-outline
                color: --theme['color']
                background-color: transparent
                background-position: 0 0
                background-size: 300% 300%
                background-image: -linear-gradient(transparent transparent (--theme['gradient'][0]) (--theme['gradient'][1]))
                box-shadow: none


                &:hover
                &.-hovered
                &:focus
                &.-focused
                    color: -text-color-by-luminance(--theme['color'], --theme-color-light, --theme-color-dark)
                    background-position: 100% 100%
                    background-color: darken(--theme['color'], --button-darken-percentage-hover)
                    border-color: darken(--theme['color'], --button-darken-percentage-hover)
                    box-shadow: --button-box-shadow-focus

                &:not(:disabled):not(.-disabled):active
                &:not(:disabled):not(.-disabled).-active
                    background-size: 400% 400%
                    background-position: 100% 100%
                    box-shadow: --button-box-shadow-active, --button-box-shadow-active-inset
                    &:focus
                        box-shadow: --button-box-shadow-active, --button-box-shadow-focus, --button-box-shadow-active-inset

        &.-transparent
            background-color: transparent

// Future-proof disabling of clicks on `<a>` elements
a.button.-disabled
fieldset:disabled a.button
    pointer-events: none


// Specificity overrides
input[type="submit"],
input[type="reset"],
input[type="button"]
    &.-block
        width: 100%

.button
    @extend .button.-md
    @extend .button.-light
