-popup(--popup = { margin: 5px, z-index: 2000 })
    &:focus:hover
        outline-width: 0

    z-index: --popup['z-index']
    position: absolute
    word-wrap: break-word;

    &[x-placement^="top"]
        margin-bottom: --popup['margin']

    &[x-placement^="bottom"]
        margin-top: --popup['margin']

    &[x-placement^="left"]
        margin-right: --popup['margin']

    &[x-placement^="right"]
        margin-left: --popup['margin']


-popup-arrow(--arrow = { size: 6px, margin: 5px, offset: 15px, background: #ffffff, border-color: #f0f0f0 })
    > .arrow,
    > .arrow::after
        position: absolute
        display: block
        width: 0
        height: 0
        border-color: transparent
        border-style: solid

    > .arrow::after
        content: "";

    &[x-placement^="top"] > .arrow
        border-bottom-width: 0

        &::after
            border-bottom-width: 0

    &[x-placement^="bottom"] > .arrow
        border-top-width: 0

        &::after
            border-top-width: 0;

    &[x-placement^="right"] > .arrow
        border-left-width: 0

        &::after
            border-left-width: 0

    &[x-placement^="left"] > .arrow
        border-right-width: 0;

        &::after
            border-right-width: 0

-popup-arrow-size(--arrow = { size: 6px, margin: 5px, offset: 15px })
    > .arrow,
    > .arrow::after
        border-width: --arrow['size']

    &[x-placement="top"],
    &[x-placement="bottom"]
        > .arrow,
        > .arrow::after
            left: "calc(50% - %s)" % (--arrow['size'] / 2)

        > .arrow::after
            margin-left: -(--arrow['size'] / 2)

    &[x-placement="top-start"],
    &[x-placement="bottom-start"]
        > .arrow,
        > .arrow::after
            left: --arrow['offset']

        > .arrow::after
            margin-left: -(--arrow['offset'] + --arrow['size'])

    &[x-placement="top-end"],
    &[x-placement="bottom-end"]
        > .arrow,
        > .arrow::after
            right: --arrow['offset']

        > .arrow::after
            margin-right: -(--arrow['offset'] + --arrow['size'])

    &[x-placement^="top"]
        margin-bottom: (--arrow['size'] + --arrow['margin'])

        > .arrow
            bottom: -(--arrow['size'])

            &::after
                bottom: 1px

    &[x-placement^="bottom"]
        margin-top: (--arrow['size'] + --arrow['margin'])

        > .arrow
            top: -(--arrow['size'])

            &::after
                top: 1px

    &[x-placement="left"]
    &[x-placement="right"]
        > .arrow,
        > .arrow::after
            top: "calc(50% - %s)" % (--arrow['size'] / 2)

        > .arrow::after
            margin-top: -(--arrow['size'] / 2)

    &[x-placement="left-start"],
    &[x-placement="right-start"]
        > .arrow,
        > .arrow::after
            top: --arrow['offset']

        > .arrow::after
            margin-top: -(--arrow['offset'] + --arrow['size'])

    &[x-placement="left-end"],
    &[x-placement="right-end"]
        > .arrow,
        > .arrow::after
            bottom: --arrow['offset']

        > .arrow::after
            margin-bottom: -(--arrow['offset'] + --arrow['size'])

    &[x-placement^="left"]
        margin-right: (--arrow['size'] + --arrow['margin'])

        > .arrow
            right: -(--arrow['size'])

            &::after
                right: 1px

    &[x-placement^="right"]
        margin-left: (--arrow['size'] + --arrow['margin'])

        > .arrow
            left: -(--arrow['size'])

            &::after
                left: 1px


-popup-arrow-variant(--arrow = { background: #ffffff, border-color: #bcbcbc })
    &[x-placement^="top"] > .arrow
        border-top-color: --arrow['border-color']

        &::after
            border-top-color: --arrow['background']


    &[x-placement^="bottom"] > .arrow
        border-bottom-color: --arrow['border-color']

        &::after
            border-bottom-color: --arrow['background']

    &[x-placement^="right"] > .arrow
        border-right-color: --arrow['border-color']

        &::after
            border-right-color: --arrow['background']

    &[x-placement^="left"] > .arrow
        border-left-color: --arrow['border-color'];

        &::after
            border-left-color: --arrow['background']