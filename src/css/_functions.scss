//
// Returns the value of a sub-map
//
// @param $variable - The map
// @param $key      - Map key
// @param $subkey   - Sub-map key
//
@function submap_get($variable, $key, $subkey) {
  $group: map_get($variable, $key);
  $element: map_get($group, $subkey);

  @if ($element) {
    @return $element;
  }

  @error "Element '#{$subkey}' not found in submap '#{$key}' group. Did you use quotes ?";
}

// Replace `$search` with `$replace` in `$string`
// @author Hugo Giraudel
// @source https://css-tricks.com/snippets/sass/str-replace-function/
//
// @param $string  - Initial string
// @param $search  - Substring to replace
// @param $replace - New value
// @return - Updated string
@function replace($search, $replace, $string) {
  $index: str-index($string, $search);

  @if $index {
    @return "#{str-slice($string, 1, $index - 1)}#{$replace}#{replace($search, $replace, str-slice($string, $index + str-length($search)))}";
  }

  @return $string;
}

// Replacement for Stylus darken().
// Sass function darken() does not have the same behavior, so we should use scale-color()
// @see https://sass-lang.com/documentation/functions/color#darken
//
// @param $color   - The color to darken
// @param $percent - The percentage of changement.
//
// @return darkened color
//
@function darken-lightness($color, $percent) {
  @return scale-color($color, $lightness: -$percent);
}
