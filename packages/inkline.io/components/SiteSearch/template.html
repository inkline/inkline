<div class="site-search">
    <ais-instant-search :search-client="searchClient" index-name="inkline">
        <ais-autocomplete :indices="searchIndices">
            <i-dropdown ref="dropdown" placement="bottom-start" :keymap="searchKeymap" slot-scope="{ currentRefinement, indices, refine }">
                <i-input
                    type="search"
                    :value="currentRefinement"
                    placeholder="Search for a product"
                    @input="refine($event) && updateDropdown()">
                    <font-awesome-icon icon="search" slot="prefix"></font-awesome-icon>
                </i-input>
                <i-dropdown-menu v-show="currentRefinement">
                    <div class="body">
                        <template v-if="index.hits.length > 0" v-for="index in indices">
                            <div class="category">{{ index.label }}</div>
                            <i-dropdown-item :to="{ name: hit.url, hash: '#' + hit.hash }" v-for="(hit, hitIndex) in index.hits" :key="hit.objectID">
                                <div class="title"><ais-highlight attribute="title" :hit="hit"/></div>
                                <div class="subtitle"><ais-highlight attribute="subtitle" :hit="hit"/></div>
                                <div class="description"><ais-snippet attribute="description" :hit="hit"/></div>
                            </i-dropdown-item>
                        </template>
                    </div>
                    <div class="footer">
                        <ais-powered-by theme="light" />
                    </div>
                </i-dropdown-menu>
            </i-dropdown>
        </ais-autocomplete>
    </ais-instant-search>
</div>
